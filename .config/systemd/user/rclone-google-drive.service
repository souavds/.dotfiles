[Unit]
Description=RClone Google Drive Mount
After=network-online.target

[Service]
Type=notify
ExecStartPre=/usr/bin/mkdir -p %h/google-drive
ExecStart=/usr/bin/rclone mount gdrive: %h/google-drive \
    --vfs-cache-mode writes \
    --vfs-cache-max-age 1h \
    --vfs-read-chunk-size 128M \
    --vfs-read-chunk-size-limit off \
    --buffer-size 256M \
    --poll-interval 15s \
    --dir-cache-time 1h \
    --timeout 1h \
    --umask 022 \
    --allow-other
ExecStop=/bin/fusermount -u %h/google-drive
Restart=on-failure
RestartSec=10

[Install]
WantedBy=default.target
